@model MyPage.Models.UnityGameConfig
@{
    ViewData["Title"] = Model.DisplayName;
}

<!-- Unity Container -->
<div id="unity-container" class="unity-desktop with-layout">
    <canvas id="unity-canvas" tabindex="-1"></canvas>
    
    <!-- Footer with Game Info - Now centered at bottom -->
    <div id="unity-footer">
        <div id="unity-build-title">
            <i class="fas fa-gamepad me-2"></i>@Model.DisplayName
        </div>
        
        <div class="unity-controls">
            <span class="fullscreen-hint d-none d-md-flex">
                Press <kbd>F</kbd> for fullscreen
            </span>
            
            <button id="unity-fullscreen-button" 
                    class="border-0 bg-transparent" 
                    title="Toggle Fullscreen (F)"
                    aria-label="Toggle Fullscreen">
                <i class="fa-solid fa-expand"></i>
            </button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/unity-loader.js" asp-append-version="true"></script>
    
    <script>
        // Initialize Unity game with configuration
        const gameLoader = new UnityGameLoader({
            gameName: '@Model.GameName',
            buildBaseName: '@Model.BuildBaseName',
            companyName: '@Model.CompanyName',
            productVersion: '@Model.ProductVersion',
            compressionFormat: '@Model.CompressionFormat'
        });

        // Make it globally accessible for debugging
        window.currentGame = gameLoader;

        // Keyboard shortcut for fullscreen (F key)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'f' || e.key === 'F') {
                e.preventDefault();
                const fullscreenBtn = document.getElementById('unity-fullscreen-button');
                if (fullscreenBtn) {
                    fullscreenBtn.click();
                }
            }
        });

        // Escape key to exit fullscreen
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });
    </script>
}